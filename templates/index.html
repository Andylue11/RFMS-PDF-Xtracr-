<!DOCTYPE html<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RFMS PDF Xtracr</title>
    <!-- Tailwind CSS CDN for rapid prototyping -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        body { background: #2c2c2c; }
        .bg-charcoal { background: #2c2c2c; }
        .text-atoz-green { color: #009966; }
        .bg-atoz-green { background: #009966; }
        .text-atoz-yellow { color: #ffe066; }
        .bg-atoz-yellow { background: #ffe066; }
        .text-heavy { font-weight: 800; }
        .input-dark { 
            background: #fff; 
            color: #222; 
            border: 1px solid #bbb; 
            font-weight: 600; 
            font-size: 0.99rem; /* Reduced by 10% from 1.1rem */
            padding: 0.36rem 0.63rem; /* Reduced by 10% */
        }
        .input-dark:focus { border-color: #7ed957; }
        label { 
            font-weight: 700; 
            font-size: 0.99rem; /* Reduced by 10% from 1.1rem */
        }
        .section-title { 
            font-size: 1.08rem; /* Reduced by 10% from 1.2rem */
            letter-spacing: 0.02em; 
        }
        .compact-section { 
            padding: 1.08rem 1.08rem; /* Reduced by 10% */
            margin-bottom: 0.9rem; /* Reduced by 10% */
        }
        .compact-grid { gap: 1.08rem; /* Reduced by 10% */ }
        .compact-btn { 
            padding: 0.54rem 1.17rem; /* Reduced by 10% */
            font-size: 0.99rem; /* Reduced by 10% */
        }
        /* Clean up PHONE 2 field */
        #ship-to-phone {
            resize: none;
            overflow: hidden;
            min-height: 60px;
            line-height: 1.2;
            font-family: inherit;
        }
        /* Reduce logo size by 10% */
        .logo-container img {
            max-height: 72px; /* Reduced by 10% from 80px */
            width: auto;
            object-fit: contain;
            background: #2c2c2c;
            border-radius: 8px;
            display: block;
        }
        /* Reduce header text size by 10% */
        .header-text {
            font-family: 'Montserrat', 'Arial', sans-serif;
            font-weight: 900;
            font-size: 2.52rem; /* Reduced by 10% from 2.8rem */
            color: #00b686;
            line-height: 72px; /* Reduced by 10% from 80px */
            height: 72px; /* Reduced by 10% from 80px */
            display: inline-flex;
            align-items: center;
            margin-left: 16.2px; /* Reduced by 10% from 18px */
            letter-spacing: 0.04em;
            white-space: nowrap;
        }
    </style>
</head>
<body class="bg-charcoal text-white font-sans">
    <!-- CHECKPOINT_20240512 -->
    <div class="max-w-6xl mx-auto p-2">
        <!-- Header with Logo -->
        <header class="flex items-center justify-between py-1 border-b border-gray-700 mb-2">
            <div class="flex items-center">
                <img src="{{ url_for('static', filename='customcolor_logo_transparent_background.jpeg') }}" alt="A to Z Flooring Solutions Logo" class="mr-2" style="max-height:72px; width:auto; object-fit:contain; background:#2c2c2c; border-radius:8px; display:block;">
                <span style="font-family: 'Montserrat', 'Arial', sans-serif; font-weight: 900; font-size: 2.52rem; color: #00b686; line-height: 72px; height: 72px; display: inline-flex; align-items: center; margin-left: 16.2px; letter-spacing: 0.04em; white-space: nowrap;">RFMS PDF XTRACR</span>
            </div>
            <div class="flex items-center" style="margin-top:65px;">
                <span id="api-status-indicator" class="block w-3 h-3 rounded-full bg-gray-400 mr-2"></span>
                <span id="api-status-text" class="text-xs text-gray-300">RFMS API: Checking...</span>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 lg:grid-rows-3 gap-4 items-start" style="align-items: flex-start; margin-top: 0;">
            <!-- Column A -->
            <div class="flex flex-col space-y-0" style="margin-top:0;">
                <section id="upload-section" class="bg-charcoal rounded-lg shadow compact-section mb-0 pb-0 border-4 border-white">
                    <h2 class="section-title text-heavy mb-1 text-atoz-green">Upload Purchase Order PDF</h2>
                    <input type="file" id="pdf-upload" accept=".pdf" class="input-dark rounded w-full mb-1">
                    <button id="upload-button" class="w-full bg-atoz-green text-black font-bold compact-btn rounded hover:bg-atoz-yellow transition text-base">Clear Data, Upload and Extract</button>
                </section>
                <section id="work-details-section" class="bg-charcoal rounded-lg shadow compact-section mb-0 pb-0 border-4 border-white">
                    <h2 class="section-title text-heavy mb-0 text-atoz-green">Work Order Details</h2>
                    <div class="mb-0">
                        <label for="po-number" class="block">Purchase Order Number</label>
                        <input type="text" id="po-number" class="input-dark rounded w-full mb-1 text-lg">
                    </div>
                    <div class="mb-0">
                        <label for="dollar-value" class="block">Purchase Order Value ($)</label>
                        <input type="number" id="dollar-value" step="0.01" class="input-dark rounded w-full mb-1 text-lg">
                    </div>
                    <div class="mb-0">
                        <label for="supervisor-name" class="block">Supervisor Name</label>
                        <input type="text" id="supervisor-name" class="input-dark rounded w-full mb-1 text-lg">
                    </div>
                    <div class="mb-2">
                        <label for="supervisor-phone" class="block">Supervisor Phone Number</label>
                        <input type="text" id="supervisor-phone" class="input-dark rounded w-full mb-1 text-lg">
                    </div>
                </section>
            </div>
            <!-- Column B -->
            <div class="flex flex-col justify-start" style="margin-top:0;">
                <div class="bg-charcoal rounded-lg shadow compact-section mb-0 pb-0 border-4 border-white" style="margin-top:0;">
                    <h2 class="section-title text-heavy mb-1 text-atoz-yellow">Sold To (RFMS Customer)</h2>
                    <div class="flex items-center mb-1">
                        <input type="text" id="builder-search-input" placeholder="EnterName or CustomerID" class="input-dark rounded flex-grow mr-2 text-base">
                        <button id="search-builder-button" class="bg-atoz-yellow text-black font-bold rounded hover:bg-atoz-green transition text-xs" style="width: 100px; padding: 0.4rem 0.3rem; white-space: normal; line-height: 1.2;">Retrieve Builders Details</button>
                    </div>
                    <div id="sold-to-fields" class="space-y-1">
                        <div>
                            <label for="sold-to-name">Name</label>
                            <input type="text" id="sold-to-name" class="input-dark rounded w-full">
                        </div>
                        <div>
                            <label for="sold-to-phone">Phone</label>
                            <input type="text" id="sold-to-phone" class="input-dark rounded w-full">
                        </div>
                        <div>
                            <label for="sold-to-email">Email</label>
                            <input type="email" id="sold-to-email" class="input-dark rounded w-full">
                        </div>
                        <div>
                            <label for="sold-to-address1">Address Line 1</label>
                            <input type="text" id="sold-to-address1" class="input-dark rounded w-full">
                        </div>
                        <div class="grid grid-cols-3 gap-2">
                            <div>
                                <label for="sold-to-city">City</label>
                                <input type="text" id="sold-to-city" class="input-dark rounded w-full">
                            </div>
                            <div>
                                <label for="sold-to-state">State</label>
                                <input type="text" id="sold-to-state" class="input-dark rounded w-full">
                            </div>
                            <div>
                                <label for="sold-to-zip">Postcode</label>
                                <input type="text" id="sold-to-zip" class="input-dark rounded w-full">
                            </div>
                        </div>
                        <div style="margin-top: 18px;"></div>
                        <div class="flex items-center mt-4">
                            <label for="sold-to-customer-id" class="mr-2 font-bold">RFMS Customer ID</label>
                            <input type="text" id="sold-to-customer-id" class="input-dark rounded w-40" readonly>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Column C -->
            <div class="flex flex-col space-y-0 lg:row-span-3" style="margin-top:0;">
                <div class="bg-charcoal rounded-lg shadow compact-section mb-0 pb-0 border-4 border-white" style="margin-top:0;">
                    <h2 class="section-title text-heavy mb-1 text-atoz-yellow">Ship To (PDF Extracted)</h2>
                    <div id="ship-to-fields" class="space-y-1">
                        <div>
                            <label for="ship-to-name">Name</label>
                            <input type="text" id="ship-to-name" class="input-dark rounded w-full">
                        </div>
                        <div>
                            <label for="ship-to-phone1" class="block mb-1">Phone 1</label>
                            <input type="text" id="ship-to-phone1" class="input-dark rounded w-full text-lg">
                        </div>
                        <div>
                            <label for="ship-to-phone2" class="block mb-1">Phone 2</label>
                            <input type="text" id="ship-to-phone2" class="input-dark rounded w-full text-lg">
                        </div>
                        <div>
                            <label for="ship-to-email">Email Address</label>
                            <input type="email" id="ship-to-email" class="input-dark rounded w-full">
                        </div>
                        <div>
                            <label for="ship-to-address1">Address Line 1</label>
                            <input type="text" id="ship-to-address1" class="input-dark rounded w-full">
                        </div>
                        <div>
                            <label for="ship-to-address2">Address Line 2</label>
                            <input type="text" id="ship-to-address2" class="input-dark rounded w-full">
                        </div>
                        <div class="flex gap-2">
                            <div class="w-2/3">
                                <label for="ship-to-city">City</label>
                                <input type="text" id="ship-to-city" class="input-dark rounded w-full">
                            </div>
                            <div class="w-1/3">
                                <label for="ship-to-zip">Postcode</label>
                                <input type="text" id="ship-to-zip" class="input-dark rounded w-full">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-800 rounded-lg shadow compact-section border-4 border-white mb-0 pb-1" style="min-height: 0;">
                    <label class="block text-atoz-yellow text-heavy mb-2 text-lg" for="alternate-contact-name">Best Contact / Real Estate Agent / Site Contact / Authorised Contact</label>
                    <div class="grid grid-cols-1 gap-3 mt-1">
                        <div>
                            <label for="alternate-contact-name" class="block mb-1">Name / Business / Address</label>
                            <textarea id="alternate-contact-name" rows="3" class="input-dark rounded w-full text-lg" placeholder="Full name, business, address if needed" style="min-height:110px;"></textarea>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="flex flex-col w-full">
                                <label for="alternate-contact-phone" class="block mb-1">Phone 1</label>
                                <input type="text" id="alternate-contact-phone" class="input-dark rounded w-full text-lg">
                            </div>
                            <div class="flex flex-col w-full">
                                <label for="alternate-contact-phone2" class="block mb-1">Phone 2</label>
                                <input type="text" id="alternate-contact-phone2" class="input-dark rounded w-full text-lg">
                            </div>
                        </div>
                    </div>
                    <div class="text-xs text-gray-400 mt-2">If present and different from main customer, this will be included in Work Order Notes as Best Contact.</div>
                </div>
                <section id="action-buttons" class="flex justify-center space-x-2 mt-2">
                    <button id="add-customer-button" class="bg-blue-600 text-white font-bold compact-btn rounded hover:bg-blue-700 transition">Add Customer</button>
                    <button id="create-job-button" class="bg-atoz-green text-black font-bold compact-btn rounded hover:bg-atoz-yellow transition">Create Job</button>
                </section>
            </div>
            <!-- Description of Works spanning columns A and B only -->
            <div class="lg:col-span-2">
                <div class="bg-charcoal rounded-lg shadow compact-section mb-0 pb-1 border-4 border-white w-full" style="margin-top:0;">
                    <label for="description-of-works" class="block">Description of Works</label>
                    <textarea id="description-of-works" rows="9" class="input-dark rounded w-full text-lg" style="min-height: 200px;"></textarea>
                    <div class="flex items-center mt-1">
                        <input type="checkbox" id="billing-group-checkbox" class="h-6 w-6 text-atoz-green border-gray-300 rounded mr-3">
                        <label for="billing-group-checkbox" class="text-base font-bold">This PO is part of a billing group / has a second PO?</label>
                    </div>
                    <div id="secondary-po-details" class="grid grid-cols-2 gap-2 mt-1 hidden">
                        <div>
                            <label for="secondary-po-suffix" class="block">Secondary PO Suffix (Two Digits)</label>
                            <div class="flex items-center mt-1">
                                <span id="secondary-po-prefix" class="text-gray-300 mr-1">[Job Number]-</span>
                                <input type="text" id="secondary-po-suffix" maxlength="2" class="input-dark rounded w-16">
                            </div>
                        </div>
                        <div>
                            <label for="second-po-dollar-value" class="block">Second PO Value ($)</label>
                            <input type="number" id="second-po-dollar-value" step="0.01" class="input-dark rounded w-full">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="notification-area"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const billingGroupCheckbox = document.getElementById('billing-group-checkbox');
            const secondaryPoDetails = document.getElementById('secondary-po-details');
            billingGroupCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    secondaryPoDetails.classList.remove('hidden');
                } else {
                    secondaryPoDetails.classList.add('hidden');
                    document.getElementById('secondary-po-suffix').value = '';
                    document.getElementById('second-po-dollar-value').value = '';
                }
            });
            document.getElementById('actual-job-number').addEventListener('input', function() {
                document.getElementById('secondary-po-prefix').textContent = this.value + '-';
            });
        });
    </script>
</body>
</html> 